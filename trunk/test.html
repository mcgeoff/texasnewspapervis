<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Test of Features</title>
  <script type="text/javascript">

var colorRamp = [
    '#993404',  // lowest good / total
    '#d95f0e',
    '#fe9929',
    '#fed98e',
    '#ffffcc',
    '#c2e699',
    '#78c679',
    '#31a354',
    '#006837',  // highest good / total
    ];
var colorRampThreshold = [
    0.5,
    0.55,
    0.6,
    0.65,
    0.7,
    0.75,
    0.8,
    0.85,
    0.9,
    ];

    function draw() {
        drawColorLegend();
        drawSizeLegend();
    }

    function drawColorLegend() {
        var canvas = document.getElementById('legend_color_canvas');
        if (canvas.getContext) {
            var ctx = canvas.getContext('2d');

            var x = 0;
            var y = 0;
            var s = Math.round(canvas.width / colorRamp.length) - 1;
            for (var i = 0; i < colorRamp.length; i++) {
                ctx.fillStyle = colorRamp[i];
                ctx.fillRect(x + i * s, y, s, s);
            }
        }
        else {
            alert('need better browser');
        }

        document.getElementById('legend_color_left').innerHTML =
            colorRampThreshold[0];
        document.getElementById('legend_color_middle').innerHTML =
            colorRampThreshold[Math.round(colorRampThreshold.length / 2)];
        document.getElementById('legend_color_right').innerHTML =
            colorRampThreshold[colorRampThreshold.length - 1];
    }

    function drawSizeLegend() {
        var canvas = document.getElementById('legend_size_canvas');
        if (canvas.getContext) {
            var ctx = canvas.getContext('2d');

            var r = Math.min(canvas.width, canvas.height) / 2;

            ctx.beginPath();
            ctx.arc(r, r, r, 0, 2 * Math.PI, true);
            ctx.stroke();
            ctx.beginPath();
            ctx.arc(r, 2*r-0.3*r, 0.3*r, 0, 2 * Math.PI, true);
            ctx.stroke();

        }
    }
  </script>
</head>
<body onload="draw();">

  <!-- color legend -->
  <div width="200">
    <div>
    <canvas id="legend_color_canvas" width="200" height="20"></canvas>
    </div>
    <div>
    <div id="legend_color_left" style="float:left"></div>
    <div id="legend_color_middle" style="float:left"></div>
    <div id="legend_color_right" style="float:left"></div>
    </div>
  </div>

  <br/> <br/> <br/>

  <!-- size legend -->
  <div>
    <div style="float:left">
      <canvas id="legend_size_canvas" width="100" height="100"></canvas>
    </div>
    <div style="float:left">
      <div id="legend_size_content">
      numbers here
      </div>
    </div>
  </div>

</body>
</html>

